<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Página Inicial</title>
  {{ style('style') }}
  {{ style('https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css') }}
  {{ script('https://code.jquery.com/jquery-3.3.1.slim.min.js') }}
</head>
<body>
  <section>
    <div class="container">
      <div class="row">
        <div class="col-10 shadow bg-white mt-5 mx-5 p-3 rounded offset-md-4">
          <div>
            {{--
              This tag let us know if the current user is logged in or not.

              ref: http://adonisjs.com/docs/4.0/views#_loggedin
              ref: http://adonisjs.com/docs/4.0/authentication#_loggedin
            --}}
            @loggedIn
              <h1> Bem vindo, {{ auth.user.nomeUsuario }} </h1></br>
              <form method="GET" action="logout">{{ csrfField() }}<button type="Submit" class="btn btn-primary">Sair</button></form></br>
              @if(auth.user.idPerfil==2)
                  <h2>Agendamento de Defesa</h2></br>
                    <form method="POST" action="/home/edita/defesa/{{obj.defesa[0].idDefesa}}?_method=PUT">
                        {{ csrfField() }}
                        <div>
                          @if(flashMessage('successmessage'))
                              <span class="alert alert-success p-1">{{ flashMessage('successmessage') }}</span>
                          @endif
                        </div> 
                        <div class="form-group"> 
                          <label for="dataDefesa">Data da Defesa</label>
                          <input type="datetime-local" class="form-control" id="dataDefesa" name="dataDefesa" value="{{old('dataDefesa',obj.defesa[0].dataDefesa)}}">
                              {{ elIf('<span class=text-danger>$self</span>', getErrorFor('dataDefesa'), hasErrorFor('dataDefesa')) }}
                        </div>
                        <div class="form-group">
                          <label for="local">Local da Defesa</label>
                          <input type="text" class="form-control" id="local" name="local" value="{{old('local',obj.defesa[0].local)}}" placeholder="Insira o endereço ou link">
                              {{ elIf('<span class=text-danger>$self</span>', getErrorFor('local'), hasErrorFor('local')) }}
                        </div>
                        <div class="form-group">
                          <label for="titulo">Título</label>
                          <input type="text" class="form-control" id="titulo" name="titulo" value="{{old('titulo',obj.defesa[0].titulo)}}" placeholder="Insira o título do Trabalho">
                              {{ elIf('<span class=text-danger>$self</span>', getErrorFor('titulo'), hasErrorFor('titulo')) }}
                        </div>
                        <div class="form-group">
                          <label for="descricao">Descrição</label></th>
                          <input type="text" class="form-control" id="descricao" name="descricao" value="{{old('descricao',obj.defesa[0].descricao)}}">
                              {{ elIf('<span class=text-danger>$self</span>', getErrorFor('descricao'), hasErrorFor('descricao')) }}
                        </div>
                        <div class="form-group">
                          <label for="tags">Tags</label></th>
                          <input type="text" class="form-control" id="tags" name="tags" value="{{old('tags',obj.defesa[0].tags)}}" placeholder="Insira palavras-chave">
                              {{ elIf('<span class=text-danger>$self</span>', getErrorFor('tags'), hasErrorFor('tags')) }}
                        </div>
                        <div class="form-group">
                          <label for="emailOrientador">Email do Orientador</label></th>
                          <input type="email" class="form-control" id="emailOrientador" name="emailOrientador" value="{{old('emailOrientador',obj.defesa[0].emailOrientador)}}" placeholder="Insira o email do seu Orientador">
                            {{ elIf('<span class=text-danger>$self</span>', getErrorFor('emailOrientador'), hasErrorFor('emailOrientador')) }}
                        </div>
                        </br><div class="form-group">
                            <button type="Submit" class="btn btn-primary">Salvar Defesa</button></br>
                        </div>
                    </form>
              @endif
              @if(auth.user.idPerfil == 3)
                <h2>Convidar Professores para a banca</h2></br>
                <form method="POST" action="/home/edita/defesa/{{obj.defesa[0].idBanca}}?_method=PUT">
                {{ csrfField() }}
                <div>
                  @if(flashMessage('successmessage'))
                      <span class="alert alert-success p-1">{{ flashMessage('successmessage') }}</span>
                  @endif
                  <div class="form-group">
                    <label for="emailConvidadoA">Email do primeiro Professor convidado</label></th>
                    <input type="email" class="form-control" id="emailConvidadoA" name="emailConvidadoA" value="{{old('emailConvidadoA','')}}" placeholder="Insira o email do primeiro Professor convidado">
                    {{ elIf('<span class=text-danger>$self</span>', getErrorFor('emailConvidadoA'), hasErrorFor('emailConvidadoA')) }}
                  </div>
                  <div class="form-group">
                    <label for="emailConvidadoB">Email do segundo Professor convidado</label></th>
                    <input type="email" class="form-control" id="emailConvidadoB" name="emailConvidadoB" value="{{old('emailConvidadoB','')}}" placeholder="Insira o email do segundo Professor convidado">
                    {{ elIf('<span class=text-danger>$self</span>', getErrorFor('emailConvidadoB'), hasErrorFor('emailConvidadoB')) }}
                  </div>
                  </br><div class="form-group">
                    <button type="Submit" class="btn btn-primary">Salvar Defesa</button></br>
                  </div>
                </div>
                </form>
              @endif
            @endloggedIn
          </div>
        </div>
      </div>
    </div>
  </section>
</body>
</html>
